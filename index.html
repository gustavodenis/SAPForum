<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="UTF-8" />
    <link href="jquery-mobile/jquery.mobile-1.4.0.min.css" rel="stylesheet" type="text/css" />
    <!-- uncoment viewport meta tag, if targeting Android 4.x.x devices -->
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <script src="jquery-mobile/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="jquery-mobile/jquery.mobile-1.4.0.min.js" type="text/javascript"></script>
    <script src="cordova.js" type="text/javascript"></script>
    <script src="barcodescanner.js" type="text/javascript"></script>
    <script src="childbrowser.js" type="text/javascript"></script>
    <script src="PushNotification.js" type="text/javascript"></script>
    <script src="telephonenumber.js" type="text/javascript"></script>
    <script src="scripts/main.js" type="text/javascript"></script>
    <!-- Default Stylesheet -->
    <link rel="stylesheet" href="styles/main.css" />
    <!-- Phone 320x480 High DPI (aka Retina) -->
    <link rel="stylesheet" media="only screen and (min-device-width: 320px) and (max-device-width: 480px) and (-webkit-device-pixel-ratio:2)" href="styles/phone-480.css" type="text/css" />
    <!-- Phone 480x800 Medium DPI (aka Samsung Galaxy S II Skyrocket) -->
    <link rel="stylesheet" media="only screen and (min-device-width: 320px) and (max-device-width: 508px) and (-webkit-device-pixel-ratio:1.5)" href="styles/phone-800.css" type="text/css" />
    <!-- Tablet 768x1024 Low DPI (aka iPad 1 & 2") -->
    <link rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-device-pixel-ratio:1)" href="styles/tablet-1024-ldpi.css" type="text/css" />
    <!-- Tablet 800x1280 Low DPI (aka Samsung Galaxy Tab 8.9" & Lenovo K1) -->
    <!--<link rel="stylesheet" media="only screen and (min-device-width: 800px) and (max-device-width: 1280px) and (-webkit-device-pixel-ratio:1)" href="styles/tablet-1280.css" type="text/css" />-->
    <!-- Phone 720x1280 High DPI (aka Google Nexus) -->
    <link rel="stylesheet" media="only screen and (min-device-width: 720px) and (max-device-width: 1280px) and (-webkit-device-pixel-ratio:2)" href="styles/phone-1280.css" type="text/css" />
    <!-- Tablet 500x1024 Low DPI (aka Kindle Fire) -->
    <!--<link rel="stylesheet" media="only screen and (min-device-width: 600px) and (max-device-width: 1024px) and (-webkit-device-pixel-ratio:1)" href="styles/tablet-600-1024.css" type="text/css" />-->
    <!-- Tablet 768x1024 High DPI (aka iPad3") -->
    <!--<link rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-device-pixel-ratio:2)" href="styles/tablet-1024-hdpi.css" type="text/css" />-->
</head>
<body onload="initNotification();">

    <!-- home page -->
    <div id="home" data-role="page" data-mini="true">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Olá <span id="ffname"></span>!</h1>
        </div>
        <div class="info-wrapper">
            <div class="info-wrapper-left">
                <img class="ice-logo" />
            </div>

            <div class="info-wrapper-right">
                <div class="info">
                    <div class="info-data" id="labelpointsTotal"></div>
                    <div class="info-label" for="labelpointsTotal">Meus Pontos:</div>
                    <div class="clear"></div>
                </div>
            </div>
            <div class="clear"></div>
        </div>
        <div data-role="content">
            <span id="mainContent"></span>
            <p><a href="#pointsDetail" class="topcoat-button" id="points" data-role="button" data-icon="star" data-transition="slide" data-theme="e">Meus Pontos</a></p>
            <p><button id="scanQR" class="ui-btn ui-icon-star ui-btn-icon-left">Marcar Pontos</button></p>
            <p><a href="#infoSession" class="topcoat-button" id="infosession" data-role="button" data-icon="star" data-transition="slide" data-theme="e">Palestra</a></p>
            <p><a href="#agendaPage" class="topcoat-button" id="agenda" data-role="button" data-icon="star" data-transition="slide" data-theme="e">Agende uma visita</a></p>
            <p><a href="#luluPage" class="topcoat-button" id="lulu" data-role="button" data-icon="star" data-transition="slide" data-theme="e">Stand Lulu</a></p>
            <p id="info"></p>
        </div>
    </div>

    <!-- logon page -->
    <div id="logon" data-role="page" data-mini="true">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Login</h1>
        </div>
        <div data-role="content">
            <form id="login">
                Nome:
                <input type="text" id="firstname" value="" />
                Sobrenome:
                <input type="text" id="lastname" value="" />
                Empresa:
                <input type="text" id="employer" value="" />
                E-mail:
                <input type="text" id="email" value="@" />
                <input type="submit" class="loginBtn" value="Login" data-icon="star" data-theme="a" />
            </form>
        </div>
    </div>

    <!-- disclamer page -->
    <div id="disclamer" data-role="page">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Aviso</h1>
        </div>
        <div data-role="content">
            <div id="disclamerContainer">
                bla bla bla

                <a id="okdisclamer" data-role="button" href="#home" data-icon="star" data-transition="slide" data-theme="a">Ok, Vamos lá!</a>
            </div>
        </div>
    </div>

    <!-- pointsDetail page -->
    <div id="pointsDetail" data-role="page" data-add-back-btn="true">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Pontos</h1>
            <a data-role="button" href="#home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <ul data-role="listview" id="pointsDetailList" data-inset="true" data-theme="d">
                <li class="center-wrapper" data-role="list-divider">
                    <span id="pointsDetail-title"></span>
                </li>
                <li>
                    <div class="ui-grid-a">
                        <div class="ui-block-a">Tipo de Ponto</div>
                        <div class="ui-block-b">
                            <span id="pointsDetail-typepoint"></span>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="ui-grid-a">
                        <div class="ui-block-a">Pontos</div>
                        <div class="ui-block-b">
                            <span id="pointsDetail-points"></span>
                        </div>
                    </div>
                </li>
            </ul>
            <p>Total de Pontos: <span id="pointsDetail-totalpoints"></span></p>
        </div>
    </div>

    <!--infoSession page-->
    <div id="infoSession" data-role="page" data-add-back-btn="true">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Palestra</h1>
            <a data-role="button" href="#home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <span id="dataAgenda"></span>
        </div>
    </div>

    <!--agenda page-->
    <div id="agendaPage" data-role="page" data-add-back-btn="true">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Agendamento de Visita</h1>
            <a data-role="button" href="#home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
        </div>
    </div>

    <!--Lulu page-->
    <div id="luluPage" data-role="page" data-add-back-btn="true">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Lulu de Stand</h1>
            <a data-role="button" href="#home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <div class="ui-field-contain">
                <label for="standLulu">Stand:</label>
                <select name="standLulu" id="standLuluCombo">
                    <option value="0">Selecione...</option>
                </select>
            </div>
            <div class="ui-field-contain">
                <label>
                    <input type="checkbox" id="question1" name="question1">Question 1
                </label>
                <label>
                    <input type="checkbox" id="question2" name="question2">Question 2
                </label>
                <label>
                    <input type="checkbox" id="question3" name="question3">Question 3
                </label>
                <label>
                    <input type="checkbox" id="question4" name="question4">Question 4
                </label>
                <label>
                    <input type="checkbox" id="question5" name="question5">Question 5
                </label>
                <label>
                    <input type="checkbox" id="question6" name="question6">Question 6
                </label>
            </div>
            <p><a href="#" class="topcoat-button" id="savelulu" data-role="button" data-icon="star" data-transition="slide" data-theme="e">Salvar</a></p>
            <p><a href="#lulurankPage" class="topcoat-button" id="lulu" data-role="button" data-icon="star" data-transition="slide" data-theme="e">Ranking</a></p>
        </div>
    </div>

    <!--Lulu Rank page-->
    <div id="lulurankPage" data-role="page" data-add-back-btn="true">
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Ranking dos Stands</h1>
            <a data-role="button" href="#home" class="ui-btn-right">Home</a>
        </div>
        <div data-role="content">
            <ul data-role="listview" id="myRankListView" data-inset="true" data-theme="d"></ul>
        </div>
    </div>
</body>
</html>

<script>

    jQuery.support.cors = true;
    $.ajaxSetup({
        cache: false
    });

    $(function () {
        $.mobile.defaultHomeScroll = 0;
    });

    var sapforum = new sapForumApp();
    sapforum.run();

    function initNotification() {
        var pushNotification = window.plugins.pushNotification;
        document.addEventListener("deviceready", initPushwooshAndroid, true);
        //if (device.platform == "Android") {
        //    document.addEventListener("deviceready", initPushwooshAndroid, true);
        //    pushNotification.onDeviceReady();
        //}

        //if (device.platform == "iPhone" || device.platform == "iOS") {
        //    document.addEventListener("deviceready", initPushwooshIOS, true);
        //    pushNotification.onDeviceReady();
        //}
    }

    function initPushwooshAndroid() {
        var pushNotification = window.plugins.pushNotification;
        pushNotification.onDeviceReady();

        pushNotification.registerDevice({ projectid: "683239994824", appid: "F4C02-5215F" },
            function (status) {
                var pushToken = status;
                //alert('push token: ' + pushToken);
            },
            function (status) {
                alert(JSON.stringify(['failed to register ', status]));
            }
        );

        document.addEventListener('push-notification', function (event) {
            var title = event.notification.title;
            var userData = event.notification.userdata;

            if (typeof (userData) != "undefined") {
                alert('user data: ' + JSON.stringify(userData));
            }

            navigator.notification.alert(title);
        });
    }

    function initPushwooshIOS() {
        var pushNotification = window.plugins.pushNotification;
        pushNotification.onDeviceReady();

        pushNotification.registerDevice({ alert: true, badge: true, sound: true, pw_appid: "F4C02-5215F", appname: "SAPForum" },
            function (status) {
                var deviceToken = status['deviceToken'];
                alert('registerDevice: ' + deviceToken);
            },
            function (status) {
                alert('failed to register : ' + JSON.stringify(status));
                navigator.notification.alert(JSON.stringify(['failed to register ', status]));
            }
        );

        pushNotification.setApplicationIconBadgeNumber(0);

        document.addEventListener('push-notification', function (event) {
            var notification = event.notification;
            navigator.notification.alert(notification.aps.alert);
            pushNotification.setApplicationIconBadgeNumber(0);
        });
    }
</script>

